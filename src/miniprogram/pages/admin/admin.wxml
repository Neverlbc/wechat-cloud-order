<!--pages/admin/admin.wxml-->
<view class="admin-page">

  <!-- é¡¶éƒ¨ç»Ÿè®¡é¢æ¿ -->
  <view class="stats-panel">
    <view class="stats-row">
      <view class="stat-card highlight">
        <text class="stat-num">{{stats.todayOrders}}</text>
        <text class="stat-label">ä»Šæ—¥è®¢å•</text>
      </view>
      <view class="stat-card">
        <text class="stat-num">Â¥{{stats.todayRevenue}}</text>
        <text class="stat-label">ä»Šæ—¥è¥æ”¶</text>
      </view>
      <view class="stat-card">
        <text class="stat-num">{{stats.pendingOrders}}</text>
        <text class="stat-label">å¾…å¤„ç†</text>
      </view>
    </view>
  </view>

  <!-- å¿«æ·æ“ä½œ -->
  <view class="action-grid">
    <view class="action-item" bindtap="goOrderManage">
      <view class="action-icon-box" style="background: linear-gradient(135deg, #FF6B6B, #EE4444);">
        <text class="action-icon">ğŸ“‹</text>
      </view>
      <text class="action-text">è®¢å•ç®¡ç†</text>
      <view class="action-badge" wx:if="{{stats.pendingOrders > 0}}">{{stats.pendingOrders}}</view>
    </view>
    <view class="action-item" bindtap="goGoodsManage">
      <view class="action-icon-box" style="background: linear-gradient(135deg, #5D9B6E, #4A7C59);">
        <text class="action-icon">ğŸœ</text>
      </view>
      <text class="action-text">èœå“ç®¡ç†</text>
    </view>
    <view class="action-item" bindtap="goSalesStats">
      <view class="action-icon-box" style="background: linear-gradient(135deg, #F0A04B, #D4882A);">
        <text class="action-icon">ğŸ“Š</text>
      </view>
      <text class="action-text">é”€å”®ç»Ÿè®¡</text>
    </view>
    <view class="action-item" bindtap="goSettings">
      <view class="action-icon-box" style="background: linear-gradient(135deg, #8B7355, #6D5A42);">
        <text class="action-icon">âš™ï¸</text>
      </view>
      <text class="action-text">åº—é“ºè®¾ç½®</text>
    </view>
  </view>

  <!-- å¾…å¤„ç†è®¢å•åˆ—è¡¨ -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">å¾…å¤„ç†è®¢å•</text>
      <view class="section-more" bindtap="goOrderManage">
        <text>æŸ¥çœ‹å…¨éƒ¨</text>
        <text class="arrow">â€º</text>
      </view>
    </view>

    <view class="order-list" wx:if="{{pendingOrders.length > 0}}">
      <view class="admin-order-card" wx:for="{{pendingOrders}}" wx:key="orderId">
        <view class="order-card-header">
          <view class="order-id-row">
            <text class="order-id">{{item.orderId}}</text>
            <text class="order-status status-{{item.status}}">{{item.statusText}}</text>
          </view>
          <text class="order-time">{{item.createTime}}</text>
        </view>

        <view class="order-card-body">
          <view class="order-item-row" wx:for="{{item.items}}" wx:for-item="food" wx:key="id">
            <text class="food-name">{{food.name}}</text>
            <text class="food-spec" wx:if="{{food.specDesc}}">ï¼ˆ{{food.specDesc}}ï¼‰</text>
            <text class="food-qty">x{{food.quantity}}</text>
          </view>
        </view>

        <view class="order-card-footer">
          <view class="order-info-row">
            <text class="order-address" wx:if="{{item.deliveryType === 'delivery'}}">ğŸ“ {{item.address.detail || 'æœªå¡«å†™åœ°å€'}}</text>
            <text class="order-address" wx:else>ğŸª åˆ°åº—è‡ªå–</text>
            <text class="order-total">Â¥{{item.totalAmount}}</text>
          </view>
          <view class="order-actions">
            <view class="admin-btn btn-reject" catchtap="onRejectOrder" data-order-id="{{item.orderId}}">æ‹’ç»</view>
            <view class="admin-btn btn-accept" catchtap="onAcceptOrder" data-order-id="{{item.orderId}}">æ¥å•</view>
          </view>
        </view>
      </view>
    </view>

    <view class="empty-state" wx:else>
      <text class="empty-icon">ğŸ‰</text>
      <text class="empty-text">æš‚æ— å¾…å¤„ç†è®¢å•</text>
    </view>
  </view>

  <!-- ä»Šæ—¥å·²å®Œæˆ -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">ä»Šæ—¥å·²å®Œæˆ</text>
    </view>
    <view class="completed-summary" wx:if="{{completedOrders.length > 0}}">
      <view class="completed-item" wx:for="{{completedOrders}}" wx:key="orderId" wx:if="{{index < 5}}">
        <view class="completed-left">
          <text class="completed-id">{{item.orderId}}</text>
          <text class="completed-items">{{item.itemsSummary}}</text>
        </view>
        <text class="completed-amount">Â¥{{item.totalAmount}}</text>
      </view>
    </view>
    <view class="empty-state small" wx:else>
      <text class="empty-text">ä»Šæ—¥æš‚æ— å®Œæˆè®¢å•</text>
    </view>
  </view>

</view>
