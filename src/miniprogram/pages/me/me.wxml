<!--pages/me/me.wxml-->
<view class="me-page">
  
  <!-- ç”¨æˆ·å¡ç‰‡ - å·²ç™»å½• -->
  <view class="user-card" wx:if="{{isLogin}}">
    <view class="user-bg-decoration"></view>
    <view class="user-info">
      <image 
        class="user-avatar" 
        src="{{userInfo.avatarUrl || 'https://picsum.photos/seed/avatar/200/200'}}" 
        mode="aspectFill"
      ></image>
      <view class="user-detail">
        <text class="nickname-display">{{userInfo.nickName}}</text>
        <text class="user-tag">ğŸŒ¿ ä¸€å‘³é²œä¼šå‘˜</text>
      </view>
    </view>
  </view>

  <!-- ç”¨æˆ·å¡ç‰‡ - æœªç™»å½• -->
  <view class="user-card" wx:else bindtap="goLogin">
    <view class="user-bg-decoration"></view>
    <view class="user-info">
      <view class="user-avatar-placeholder">
        <text class="avatar-placeholder-icon">ğŸ‘¤</text>
      </view>
      <view class="user-detail">
        <text class="login-prompt">ç‚¹å‡»ç™»å½•</text>
        <text class="login-sub">ç™»å½•åäº«å—ä¾¿æ·ç‚¹é¤ä½“éªŒ</text>
      </view>
      <text class="login-arrow">â€º</text>
    </view>
  </view>

  <!-- è®¢å•å¿«æ·å…¥å£ -->
  <view class="order-shortcuts">
    <view class="shortcuts-header">
      <text class="shortcuts-title">æˆ‘çš„è®¢å•</text>
      <view class="view-all" bindtap="goAllOrders">
        <text>æŸ¥çœ‹å…¨éƒ¨</text>
        <text class="arrow">â€º</text>
      </view>
    </view>
    <view class="shortcuts-grid">
      <view class="shortcut-item" bindtap="goToOrders" data-type="pending">
        <view class="shortcut-icon-box">
          <text class="shortcut-icon">ğŸ’°</text>
          <view class="shortcut-badge" wx:if="{{orderStats.pending > 0}}">{{orderStats.pending}}</view>
        </view>
        <text class="shortcut-text">å¾…ä»˜æ¬¾</text>
      </view>
      <view class="shortcut-item" bindtap="goToOrders" data-type="delivering">
        <view class="shortcut-icon-box">
          <text class="shortcut-icon">ğŸ›µ</text>
          <view class="shortcut-badge" wx:if="{{orderStats.delivering > 0}}">{{orderStats.delivering}}</view>
        </view>
        <text class="shortcut-text">é…é€ä¸­</text>
      </view>
      <view class="shortcut-item" bindtap="goToOrders" data-type="completed">
        <view class="shortcut-icon-box">
          <text class="shortcut-icon">âœ…</text>
          <view class="shortcut-badge" wx:if="{{orderStats.completed > 0}}">{{orderStats.completed}}</view>
        </view>
        <text class="shortcut-text">å·²å®Œæˆ</text>
      </view>
      <view class="shortcut-item" bindtap="goAllOrders">
        <view class="shortcut-icon-box">
          <text class="shortcut-icon">ğŸ“‹</text>
        </view>
        <text class="shortcut-text">å…¨éƒ¨</text>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="menu-section">
    <!-- å•†å®¶ç®¡ç†å…¥å£ï¼ˆè¿ç‚¹5æ¬¡ç‰ˆæœ¬å·è§¦å‘ï¼‰ -->
    <view class="menu-item admin-entry" wx:if="{{isAdmin}}" bindtap="onMenuTap" data-action="admin">
      <view class="menu-left">
        <text class="menu-icon">ğŸ“Š</text>
        <text class="menu-title">å•†å®¶ç®¡ç†</text>
      </view>
      <view class="admin-right">
        <text class="admin-tag">å·²éªŒè¯</text>
        <text class="menu-arrow">â€º</text>
      </view>
    </view>

    <view 
      class="menu-item" 
      wx:for="{{menuItems}}" 
      wx:key="action"
      bindtap="onMenuTap"
      data-action="{{item.action}}"
    >
      <view class="menu-left">
        <text class="menu-icon">{{item.icon}}</text>
        <text class="menu-title">{{item.title}}</text>
      </view>
      <text class="menu-arrow">â€º</text>
    </view>
  </view>

  <!-- åº•éƒ¨å“ç‰Œ -->
  <view class="footer-brand">
    <text class="footer-logo">ğŸŒ¿</text>
    <text class="footer-name">ä¸€å‘³é²œç²‰åº—</text>
    <text class="footer-ver" bindtap="onVersionTap">v1.0.0</text>
  </view>
</view>
