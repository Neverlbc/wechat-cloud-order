<!--pages/admin-stats/admin-stats.wxml-->
<view class="stats-page">

  <!-- æ—¶é—´ç­›é€‰ -->
  <view class="time-tabs">
    <view 
      class="time-tab {{currentTab === idx ? 'active' : ''}}"
      wx:for="{{tabs}}"
      wx:key="*this"
      wx:for-index="idx"
      bindtap="onTabChange"
      data-index="{{idx}}"
    >{{item}}</view>
  </view>

  <!-- æ ¸å¿ƒæŒ‡æ ‡ -->
  <view class="summary-cards">
    <view class="summary-card">
      <text class="summary-value">{{summary.totalOrders}}</text>
      <text class="summary-label">è®¢å•æ•°</text>
    </view>
    <view class="summary-card highlight">
      <text class="summary-value">Â¥{{summary.totalRevenue}}</text>
      <text class="summary-label">è¥æ”¶</text>
    </view>
    <view class="summary-card">
      <text class="summary-value">Â¥{{summary.avgOrderAmount}}</text>
      <text class="summary-label">å®¢å•ä»·</text>
    </view>
    <view class="summary-card">
      <text class="summary-value">{{summary.completedOrders}}</text>
      <text class="summary-label">å·²å®Œæˆ</text>
    </view>
  </view>

  <!-- æ¯æ—¥è¶‹åŠ¿ï¼ˆé"ä»Šæ—¥"æ—¶æ˜¾ç¤ºï¼‰ -->
  <view class="section" wx:if="{{dailyStats.length > 0}}">
    <view class="section-header">
      <text class="section-title">ğŸ“ˆ æ¯æ—¥è¥æ”¶</text>
    </view>
    <view class="chart-area">
      <view class="bar-chart">
        <view class="bar-col" wx:for="{{dailyStats}}" wx:key="date">
          <text class="bar-value">{{item.revenue > 0 ? 'Â¥' + item.revenue : ''}}</text>
          <view class="bar-fill" style="height: {{item.barHeight}}%"></view>
          <text class="bar-label">{{item.date}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- çƒ­é”€æ’è¡Œ -->
  <view class="section" wx:if="{{hotGoods.length > 0}}">
    <view class="section-header">
      <text class="section-title">ğŸ”¥ çƒ­é”€æ’è¡Œ</text>
    </view>
    <view class="hot-list">
      <view class="hot-item" wx:for="{{hotGoods}}" wx:key="name">
        <view class="hot-rank rank-{{item.rank <= 3 ? item.rank : 'other'}}">{{item.rank}}</view>
        <view class="hot-info">
          <view class="hot-top">
            <text class="hot-name">{{item.name}}</text>
            <text class="hot-count">{{item.count}}ä»½</text>
          </view>
          <view class="hot-bar-bg">
            <view class="hot-bar-fill" style="width: {{item.barWidth}}%"></view>
          </view>
        </view>
        <text class="hot-revenue">Â¥{{item.revenue}}</text>
      </view>
    </view>
  </view>

  <!-- è®¢å•çŠ¶æ€åˆ†å¸ƒ -->
  <view class="section" wx:if="{{statusDistribution.length > 0}}">
    <view class="section-header">
      <text class="section-title">ğŸ“Š è®¢å•çŠ¶æ€</text>
    </view>
    <view class="status-grid">
      <view class="status-item" wx:for="{{statusDistribution}}" wx:key="name">
        <text class="status-count">{{item.count}}</text>
        <text class="status-name">{{item.name}}</text>
        <text class="status-percent">{{item.percent}}%</text>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{hotGoods.length === 0 && summary.totalOrders === 0}}">
    <text class="empty-icon">ğŸ“Š</text>
    <text class="empty-text">æš‚æ— é”€å”®æ•°æ®</text>
  </view>

</view>
