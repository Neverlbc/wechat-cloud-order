<!--pages/login/login.wxml-->
<view class="login-page">

  <!-- 顶部装饰 -->
  <view class="bg-circle circle-1"></view>
  <view class="bg-circle circle-2"></view>
  <view class="bg-circle circle-3"></view>

  <!-- 品牌展示区 -->
  <view class="brand-area">
    <view class="logo-box">
      <text class="logo-emoji">🌿</text>
    </view>
    <view class="brand-name-row">
      <text class="brand-name">一味鲜</text>
      <text class="brand-seal">甄选</text>
    </view>
    <text class="brand-slogan">现熬高汤 · 传统砂锅 · 用心做好每一碗</text>
  </view>

  <!-- 登录卡片 -->
  <view class="login-card">
    <text class="login-title">欢迎光临</text>
    <text class="login-desc">授权微信账号，享受便捷点餐体验</text>

    <!-- 头像选择 -->
    <view class="avatar-section">
      <button class="avatar-choose-btn" open-type="chooseAvatar" bindchooseavatar="onChooseAvatar">
        <image 
          class="login-avatar" 
          src="{{avatarUrl || defaultAvatar}}" 
          mode="aspectFill"
        ></image>
        <view class="avatar-edit-badge">📷</view>
      </button>
      <text class="avatar-tip">点击选择头像</text>
    </view>

    <!-- 昵称输入 -->
    <view class="nickname-section">
      <view class="input-box">
        <text class="input-icon">👤</text>
        <input 
          type="nickname" 
          class="nickname-input" 
          placeholder="请输入昵称" 
          placeholder-class="input-placeholder"
          value="{{nickName}}"
          bindblur="onNicknameBlur"
          bindinput="onNicknameInput"
        />
      </view>
    </view>

    <!-- 登录按钮 -->
    <button class="login-btn {{canLogin ? '' : 'disabled'}}" bindtap="onLogin">
      <text class="login-btn-text">微信授权登录</text>
    </button>

    <!-- 协议提示 -->
    <view class="agreement">
      <view class="checkbox {{agreed ? 'checked' : ''}}" bindtap="onToggleAgreement">
        <text wx:if="{{agreed}}">✓</text>
      </view>
      <text class="agreement-text">我已阅读并同意</text>
      <text class="agreement-link" bindtap="onShowPrivacy">《用户协议与隐私政策》</text>
    </view>
  </view>

  <!-- 底部装饰 -->
  <view class="footer-text">
    <text>一味鲜粉店 © 2026</text>
  </view>
</view>
